<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Add Student</title>
    <!-- Bootstrap 5 CSS CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
      {% include 'structure/header.html' %}

    <div class="container min-vh-100 d-flex justify-content-center align-items-center">
        <div class="row w-100 justify-content-center">
            <div class="col-md-8">

                <div class="card shadow rounded-3">
                    <div class="card-header bg-primary text-white">
                        <h4 class="mb-0">Add Student</h4>
                    </div>
                    <div class="card-body">

                        {% if error_message %}
                            <div class="alert alert-danger" role="alert">
                                {{ error_message }}
                            </div>
                        {% endif %}

                        <form method="post" class="needs-validation" novalidate>
                            {% csrf_token %}

                            <div class="mb-3">
                                <label class="form-label">First Name <span class="text-danger">*</span></label>
                                <input
                                    type="text"
                                    class="form-control"
                                    name="first_name"
                                    value="{{ first_name|default:'' }}"
                                    required>
                                <div class="invalid-feedback">Please enter the first name.</div>
                            </div>

                            <div class="mb-3">
                                <label class="form-label">Middle Name</label>
                                <input
                                    type="text"
                                    class="form-control"
                                    name="middle_name"
                                    value="{{ middle_name|default:'' }}">
                            </div>

                            <div class="mb-3">
                                <label class="form-label">Last Name <span class="text-danger">*</span></label>
                                <input
                                    type="text"
                                    class="form-control"
                                    name="last_name"
                                    value="{{ last_name|default:'' }}"
                                    required>
                                <div class="invalid-feedback">Please enter the last name.</div>
                            </div>

                            <div class="mb-3">
                                <label for="gender" class="form-label">Gender</label>
                                <select
                                    class="form-select"
                                    id="gender"
                                    name="gender"
                                    required>
                                    <option value="" disabled {% if not gender %}selected{% endif %}>-- Select --</option>
                                    <option value="Female" {% if gender == "Female" %}selected{% endif %}>Female</option>
                                    <option value="Male" {% if gender == "Male" %}selected{% endif %}>Male</option>
                                    <option value="Others" {% if gender == "Others" %}selected{% endif %}>Others</option>
                                </select>
                                <div class="invalid-feedback">Please select a gender.</div>
                            </div>

                            <div class="mb-3">
                                <label for="date_of_birth" class="form-label">Date of Birth</label>
                                <input
                                    type="date"
                                    class="form-control"
                                    id="date_of_birth"
                                    name="date_of_birth"
                                    value="{{ date_of_birth|default:'' }}"
                                    required>
                                <div class="invalid-feedback">Please enter a valid date of birth.</div>
                            </div>

                            <div class="mb-3">
                                <label for="year_level" class="form-label">Year Level</label>
                                <select
                                    class="form-select"
                                    id="year_level"
                                    name="year_level"
                                    required>
                                    <option value="" disabled {% if not year_level %}selected{% endif %}>-- Select --</option>
                                    <option value="1st" {% if year_level == "1st" %}selected{% endif %}>1st Year</option>
                                    <option value="2nd" {% if year_level == "2nd" %}selected{% endif %}>2nd Year</option>
                                    <option value="3rd" {% if year_level == "3rd" %}selected{% endif %}>3rd Year</option>
                                    <option value="4th" {% if year_level == "4th" %}selected{% endif %}>4th Year</option>
                                </select>
                                <div class="invalid-feedback">Please select a year level.</div>
                            </div>

                            <div class="d-flex justify-content-between">
                                <!-- Changed to blue -->
                                <button type="submit" class="btn btn-primary">Add Student</button>
                                <a href="{% url 'list_students' %}" class="btn btn-secondary">CANCEL</a>
                            </div>
                        </form>

                    </div>
                </div>

            </div>
        </div>
    </div>

    <!-- Bootstrap 5 JS Bundle CDN (includes Popper) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Bootstrap Validation Script -->
    <script>
    (() => {
        'use strict'
        const forms = document.querySelectorAll('.needs-validation')
        Array.from(forms).forEach(form => {
            form.addEventListener('submit', event => {
                if (!form.checkValidity()) {
                    event.preventDefault()
                    event.stopPropagation()
                }
                form.classList.add('was-validated')
            }, false)
        })
    })()
    </script>

</body>
</html>
